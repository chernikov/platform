@model AttendanceReport
@{
    ViewBag.Title = "Index";
    Layout = "~/Areas/Default/Views/Shared/_BootstrapLayout.cshtml";
    var currentUser = ((platformAthletic.Controllers.BaseController)ViewContext.Controller).CurrentUser;
}

<div class="report-wrapper">
    <div class="row">
        <div class="col-md-9">
            <div class="pull-right search-wrapper">
                <div class="input-group">
                    @*search*@
                    @Html.TextBox("SearchString", Model.Search.SearchString, new { @class = "form-control", id = "SearchAthlete", placeholder = "SEARCH ATHLETE" })
                    <span class="input-group-btn">
                        <button class="btn btn-aslink" type="button" id="SearchBtn"><span class="glyphicon glyphicon-search"></span></button>
                    </span>
                </div>
            </div>

            @*panel*@
            <div class="tabpanel">
                <!-- Nav tabs -->
                <ul class="nav nav-tabs" role="tablist">
                    <li class="active"><a href="/report">ATTENDANCE REPORT</a></li>
                    <li><a href="/report/progress">PROGRESS REPORT</a></li>
                </ul>
                <!-- Tab panes -->
                <div class="tab-content">
                    <div role="tabpanel" class="tab-pane active">
                        <form class="form-inline search-wrapper">
                            @*filter*@
                            <div class="form-group">
                                <div class="select-style">
                                    @Html.DropDownList("SportID", Model.Search.SelectListSportID, new { @class = "form-control filter" })
                                    <div></div>
                                </div>
                            </div>
                            <div class="form-group">
                                <div class="select-style">
                                    @Html.DropDownList("FieldPositionID", Model.Search.SelectListFieldPositionID, new { @class = "form-control filter" })
                                    <div></div>
                                </div>
                            </div>
                            <div class="form-group">
                                <div class="select-style">
                                    @Html.DropDownList("GroupID", Model.Search.SelectListGroupID, new { @class = "form-control filter" })
                                    <div></div>
                                </div>
                            </div>
                            <div class="form-group">
                                <div class="select-style">
                                    @Html.DropDownList("GradYear", Model.Search.SelectListGradYear, new { @class = "form-control filter" })
                                    <div></div>
                                </div>
                            </div>
                            <div class="form-group">
                                @Html.TextBox("StartPeriod", Model.Search.StartPeriod, new { @class = "form-control filter" })
                            </div>
                            <div class="form-group">
                                @Html.TextBox("EndPeriod", Model.Search.EndPeriod, new { @class = "form-control filter" })
                            </div>
                        </form>
                        @*table*@
                        <table class="table">
                            <thead>
                                <tr class="report-header">
                                    <th>RANK</th>
                                    <th class="reverse-sortable">NAME</th>
                                    <th class="sortable"><span data-type="Week" class="sort @(Model.Search.Sort == SearchAttendanceReport.SortEnum.WeekAsc ? "asc" : "") @(Model.Search.Sort == SearchAttendanceReport.SortEnum.WeekDesc ? "desc" : "")"></span>WEEK</th>
                                    <th class="sortable"><span data-type="Month" class="sort @(Model.Search.Sort == SearchAttendanceReport.SortEnum.MonthAsc ? "asc" : "") @(Model.Search.Sort == SearchAttendanceReport.SortEnum.MonthDesc ? "desc" : "")"></span>MONTH</th>
                                    <th class="sortable"><span data-type="Year" class="sort @(Model.Search.Sort == SearchAttendanceReport.SortEnum.YearAsc ? "asc" : "") @(Model.Search.Sort == SearchAttendanceReport.SortEnum.YearDesc ? "desc" : "")"></span>YEAR</th>
                                    <th class="sortable"><span data-type="AllTime" class="sort @(Model.Search.Sort == SearchAttendanceReport.SortEnum.AllTimeAsc ? "asc" : "") @(Model.Search.Sort == SearchAttendanceReport.SortEnum.AllTimeDesc ? "desc" : "")"></span>ALL TIME</th>
                                </tr>
                            </thead>
                            @foreach (var item in Model.List)
                            {
                                <tr class="item @(item.User.ID == Model.Search.StartID ? "selected" : "")" data-id="@item.User.ID">
                                    <td class="rank"><span>@item.Position</span></td>
                                    <td class="name"><span><img src="@item.User.FullAvatarPath?w=24&h=24&mode=crop" class="img-circle" />&nbsp;&nbsp; <span class="user-name">@item.User.FirstName @item.User.LastName</span></span></td>
                                    <td><span class="@((Model.Search.Sort == SearchAttendanceReport.SortEnum.WeekAsc || Model.Search.Sort == SearchAttendanceReport.SortEnum.WeekDesc) ? "selected" : "")">@item.Week</span></td>
                                    <td><span class="@((Model.Search.Sort == SearchAttendanceReport.SortEnum.MonthAsc || Model.Search.Sort == SearchAttendanceReport.SortEnum.MonthDesc) ? "selected" : "")">@item.Month</span></td>
                                    <td><span class="@((Model.Search.Sort == SearchAttendanceReport.SortEnum.YearAsc || Model.Search.Sort == SearchAttendanceReport.SortEnum.YearDesc) ? "selected" : "")">@item.Year</span></td>
                                    <td><span class="@((Model.Search.Sort == SearchAttendanceReport.SortEnum.AllTimeAsc || Model.Search.Sort == SearchAttendanceReport.SortEnum.AllTimeDesc) ? "selected" : "")">@item.AllTime</span></td>
                                </tr>
                            }
                        </table>
                        <div class="text-center">
                            @*paging*@
                            <ul class="pagination">
                                @Html.PageLinkBootstrap(Model.Search.Page, Model.CountPage, i => @Url.Action("Index", new { Page = i, Sort = Model.Search.Sort, SportID = Model.Search.SportID, FieldPositionID = Model.Search.FieldPositionID, GroupID = Model.Search.GroupID, GradYear = Model.Search.GradYear, StartPeriod = Model.Search.StartPeriod, EndPeriod = Model.Search.EndPeriod }))
                            </ul>
                        </div>
                    </div>
                </div>
            </div>

        </div>
        <div class="col-md-3">
            @*sidetable*@
        </div>
    </div>
</div>

