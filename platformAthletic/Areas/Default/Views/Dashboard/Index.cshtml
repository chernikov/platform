@model PageableData<User>
@{
    ViewBag.Title = "Dashboard";
    Layout = "~/Areas/Default/Views/Shared/_BootstrapLayout.cshtml";
    var currentUser = ((platformAthletic.Controllers.BaseController)ViewContext.Controller).CurrentUser;
    var inTraining = currentUser.IsWeekAvaiable;
    var groupId = (int?)ViewBag.GroupId;
    var date = (DateTime)ViewBag.SelectedDate;

}
@section styles {
    <link href="~/Content/tooltipster.css" rel="stylesheet" />
}
@section header {
    <script src="~/Scripts/Chart.js"></script>
    <script src="~/Scripts/hogan.js"></script>
    <script src="~/Scripts/typeahead.jquery.js"></script>
    <script src="~/Scripts/jquery.tooltipster.js"></script>
    <script src="~/Scripts/jquery.mask.js"></script>
    <script src="~/Scripts/default/user-sbc.js"></script>
    <script src="~/Scripts/default/dashboard.js"></script>
    <script src="~/Scripts/default/team-player-info.js"></script>
    <script src="~/Scripts/default/modal-attendance.js"></script>
    <script src="~/Scripts/default/team.js"></script>
    <script src="~/Scripts/default/add-players.js"></script>
    @if (currentUser.Mode == (int)platformAthletic.Model.User.ModeEnum.Tutorial)
    {
        <script src="~/Scripts/default/tutorial.js"></script>
    }
}
@Html.Hidden("DateHidden", date.ToString("dd.MM.yyyy"))
@Html.Hidden("CurrentDateHidden", DateTime.Now.Current().ToString("dd.MM.yyyy"))
<div class="container-fluid">
    <div class="side-body" id="Content">
        <div class="breadcrumb">
            <div class="row">
                <div class="col-sm-12 col-md-6 col-lg-3 overflow">
                    <ol>
                        <li><a href="/"><span class="glyphicon glyphicon-home"></span>&nbsp;&nbsp;&nbsp; Home</a></li>
                        <li class="active"><a href="/dashboard">Dashboard</a></li>
                    </ol>
                </div>
                <div class="col-sm-12 col-md-6 col-lg-3">
                    <button class="btn btn-primary btn-margin btn-margin-md todoUpdate" data-todo="@((int)platformAthletic.Model.User.TodoEnum.ViewWorkOut)" id="PrintAll"><span class="glyphicon glyphicon-print"></span>&nbsp;&nbsp;PRINT ALL WORKOUTS</button>
                </div>
                <div class="col-sm-12 col-md-6 col-lg-3 btn-margin btn-margin-md">
                    @using (Html.BeginForm("Index", "Dashboard", FormMethod.Get))
                    {
                        <div class="input-group">
                            <input type="text" class="form-control" id="SearchAthlete" name="searchString" placeholder="SEARCH ATHLETE" value="@ViewBag.SearchString">
                            <span class="input-group-btn">
                                <button class="btn btn-aslink" type="button" id="SearchBtn"><span class="glyphicon glyphicon-search"></span></button>
                            </span>
                            <a href="#" class="glyphicon glyphicon-remove clear-search"></a>
                        </div>
                    }
                </div>
                @if (ViewBag.SelectedListGroups != null)
                {

                    <div class="col-sm-12 col-md-6 col-lg-3 btn-margin">
                        <div class="custom-style">
                            @Html.DropDownList("GroupId", ViewBag.SelectedListGroups as IEnumerable<SelectListItem>, new { @class = "form-control" })
                            <div></div>
                        </div>
                    </div>
                }
            </div>
        </div>
        <div class="row  row-same-height">
            <div class="col-lg-6 col-sm-12 col-md-12 top-padding" id="TablePart">
                <div class="pull-right">
                    <a href="/dashboard/extended" id="ExtendButton"> <span class="z-index2 expand"></span></a>
                </div>
                <div class="row">
                    <div class="col-lg-6 col-sm-6 col-xs-12">
                        <h3>
                            @currentUser.OwnTeam.Name.ToUpper()
                        </h3>
                    </div>
                    <div class="col-lg-6 col-sm-6 col-xs-12">
                        <div class="btn btn-info" id="AddPlayersButton"><span class="glyphicon glyphicon-user"></span> ADD PLAYERS</div>
                    </div>
                </div>
                <table class="table table-players">
                    <thead>
                        <tr>
                            <td>
                                <p class="attendance-header">
                                    <span class="title">ATTENDANCE</span>
                                    <span class="glyphicon glyphicon-calendar calendar" id="CalendarButton"></span>
                                </p>
                                <p><span class="date" id="CurrentDate" data-date="@date">@date.ToString("MM/dd/yyyy")</span></p>
                            </td>
                            <td class="user-name">
                                PLAYER NAME
                            </td>
                        </tr>
                    </thead>
                    <tbody>
                        @foreach (var item in Model.List)
                        {
                            <tr class="user-item playerItem" data-id="@item.ID">
                                <td>
                                    <div class="styled-checkbox">
                                        <input type="checkbox" class="AttendanceCheck" data-id="@item.ID" id="Attendance_@item.ID" @(item.HasAttendance(date) ? "checked" : "") />
                                        <label for="Attendance_@item.ID"></label>
                                    </div>
                                </td>
                                <td class="user-name" data-id="@item.ID">
                                    @item.FirstName @item.LastName
                                </td>
                            </tr>
                        }
                    </tbody>
                </table>
                <div class="text-center">
                    <ul class="pagination">
                        @if (Model.PageNo > 1)
                        {
                            <li class="@(Model.PageNo == 1 ? "disable" : "")"><a href="@Url.Action("Index", new { groupId, selectedDate = date, page = Model.PageNo - 1})" class="arrow-left"><span></span></a></li>
                        }
                        @for (int i = 1; i <= Model.CountPage; i++)
                        {
                            <li class="@(i == Model.PageNo ? "active": "")"><a href="@Url.Action("Index", new { groupId, selectedDate = date, page = i})">@i</a></li>
                        }
                        @if (Model.PageNo < Model.CountPage)
                        {
                            <li class="@(Model.PageNo == Model.CountPage ? "disable" : "")"><a href="@Url.Action("Index", new { groupId, selectedDate = date, page = Model.PageNo + 1})" class="arrow-right"><span></span></a></li>
                        }
                    </ul>
                </div>
            </div>
            <div id="UserInfoWrapper" class="col-lg-6 col-md-12 col-sm-12 user-part top-padding">
            </div>
        </div>
    </div>
</div> 