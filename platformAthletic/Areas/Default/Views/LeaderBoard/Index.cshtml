@model platformAthletic.Models.Info.NationalLeaderboard
@{
    ViewBag.Title = "National Leaderboard";
    Layout = "~/Areas/Default/Views/Shared/_BootstrapLayout.cshtml";
    var currentUser = ((platformAthletic.Controllers.BaseController)ViewContext.Controller).CurrentUser;
}
@section header {
    <script src="~/Scripts/hogan.js"></script>
    <script src="~/Scripts/typeahead.jquery.js"></script>
    <script src="~/Scripts/default/leaderboard.js"></script>
}
@Html.Hidden("Sort", Model.Search.Sort)
@Html.Hidden("StartID", Model.Search.StartID)

<div class="container-fluid">
    <div class="side-body">

        <div class="breadcrumb">
            <div class="row">
                <div class="col-lg-12 overflow">
                    <ol>
                        <li><a href="/"><span class="glyphicon glyphicon-home"></span>&nbsp;&nbsp;&nbsp; Home</a></li>
                        <li class="active"><a href="/leaderboard">National Leaderboard </a></li>
                    </ol>
                </div>
            </div>
        </div>
        <div class="report-wrapper leaderboard">
            <div class="pull-right search-wrapper">
                <div class="input-group">
                    @Html.TextBox("SearchString", Model.Search.SearchString, new { @class = "form-control", id = "SearchAthlete", placeholder = "SEARCH ATHLETE" })
                    <span class="input-group-btn">
                        <button class="btn btn-aslink" type="button" id="SearchBtn"><span class="glyphicon glyphicon-search"></span></button>
                    </span>
                </div>
            </div>
            <div class="tabpanel">
                <!-- Nav tabs -->
                <ul class="nav nav-tabs" role="tablist">
                    <li class="active"><a href="/leaderboard">NATIONAL LEADERBOARD</a></li>
                    @if (currentUser.OwnTeam != null || currentUser.Team != null)
                    {
                        <li><a href="/leaderboard/school">SCHOOL LEADERBOARD</a></li>
                    }
                </ul>
                <!-- Tab panes -->
                <div class="tab-content">
                    <div role="tabpanel" class="tab-pane active">
                        <form class="form-inline search-wrapper">
                            <div class="row">
                                @if (Model.Search.SelectListSportID.Count() > 1)
                                {
                                    <div class="form-group col-xs-6 col-sm-4">
                                        <div class="select-style">
                                            @Html.DropDownList("SportID", Model.Search.SelectListSportID, new { @class = "form-control filter" })
                                            <div></div>
                                        </div>
                                    </div>
                                }
                                @if (Model.Search.SelectListFieldPositionID.Count() > 1)
                                {
                                    <div class="form-group col-xs-6 col-sm-4">
                                        <div class="select-style">
                                            @Html.DropDownList("FieldPositionID", Model.Search.SelectListFieldPositionID, new { @class = "form-control filter" })
                                            <div></div>
                                        </div>
                                    </div>
                                }
                                @if (Model.Search.SelectListGender.Count() > 1)
                                {
                                    <div class="form-group col-xs-6 col-sm-4">
                                        <div class="select-style">
                                            @Html.DropDownList("Gender", Model.Search.SelectListGender, new { @class = "form-control filter" })
                                            <div></div>
                                        </div>
                                    </div>
                                }
                                @if (Model.Search.SelectListAge.Count() > 1)
                                {
                                    <div class="form-group col-xs-6 col-sm-4">
                                        <div class="select-style">
                                            @Html.DropDownList("Age", Model.Search.SelectListAge, new { @class = "form-control filter" })
                                            <div></div>
                                        </div>
                                    </div>
                                }
                                @if (Model.Search.SelectListLevelID.Count() > 1)
                                {
                                    <div class="form-group col-xs-6 col-sm-4">
                                        <div class="select-style">
                                            @Html.DropDownList("LevelID", Model.Search.SelectListLevelID, new { @class = "form-control filter" })
                                            <div></div>
                                        </div>
                                    </div>
                                }
                                @if (Model.Search.ShowGradYear && Model.Search.SelectListGradYears.Count() > 1)
                                {
                                    <div class="form-group col-xs-6 col-sm-4">
                                        <div class="select-style">
                                            @Html.DropDownList("GradYear", Model.Search.SelectListGradYears, new { @class = "form-control filter" })
                                            <div></div>
                                        </div>
                                    </div>
                                }
                                @if (Model.Search.SelectListStateID.Count() > 1)
                                {
                                    <div class="form-group col-xs-6 col-sm-4">
                                        <div class="select-style">
                                            @Html.DropDownList("StateID", Model.Search.SelectListStateID, new { @class = "form-control filter" })
                                            <div></div>
                                        </div>
                                    </div>
                                }
                                <button class="btn btn-primary pull-right" id="clear-search">Clear</button>
                            </div>
                        </form>
                        <br />
                        @if (Model.List.Count() > 0)
                        {
                        <table class="table leader-table">
                            <thead>
                                <tr class="leaderboard-header">
                                    <th class="tcenter rank">RANK</th>
                                    <th class="reverse-sortable"><span data-type="Name" class="sort @(Model.Search.Sort == SearchNationalLeaderboard.SortEnum.NameAsc ? "asc" : "") @(Model.Search.Sort == SearchNationalLeaderboard.SortEnum.NameDesc ? "desc" : "")"></span>NAME</th>
                                    <th class="sortable"><span data-type="Squat" class="sort @(Model.Search.Sort == SearchNationalLeaderboard.SortEnum.SquatAsc ? "asc" : "") @(Model.Search.Sort == SearchNationalLeaderboard.SortEnum.SquatDesc ? "desc" : "")"></span>SQUAT</th>
                                    <th class="sortable"><span data-type="Bench" class="sort @(Model.Search.Sort == SearchNationalLeaderboard.SortEnum.BenchAsc ? "asc" : "") @(Model.Search.Sort == SearchNationalLeaderboard.SortEnum.BenchDesc ? "desc" : "")"></span>BENCH</th>
                                    <th class="sortable"><span data-type="Clean" class="sort @(Model.Search.Sort == SearchNationalLeaderboard.SortEnum.CleanAsc ? "asc" : "") @(Model.Search.Sort == SearchNationalLeaderboard.SortEnum.CleanDesc ? "desc" : "")"></span>CLEAN</th>
                                    <th class="sortable"><span data-type="Total" class="sort @(Model.Search.Sort == SearchNationalLeaderboard.SortEnum.TotalAsc ? "asc" : "") @(Model.Search.Sort == SearchNationalLeaderboard.SortEnum.TotalDesc ? "desc" : "")"></span>TOTAL</th>
                                </tr>
                            </thead>

                            @Html.Action("NationalTop", "Leaderboard", new { search = Model.Search })

                            <tr class="header">
                                <td colspan="6">CURRENT LEADERS</td>
                            </tr>
                            @foreach (var item in Model.List)
                            {
                                <tr class="item @(item.User.ID == Model.Search.StartID ? "selected" : "")" data-id="@item.User.ID">
                                    <td class="rank"><span>@item.Position</span></td>
                                    <td class="name"><span class="@((Model.Search.Sort == SearchNationalLeaderboard.SortEnum.NameAsc || Model.Search.Sort == SearchNationalLeaderboard.SortEnum.NameDesc) ? "selected" : "")"><img src="@item.User.FullAvatarPath?w=24&h=24&mode=crop" class="img-circle" />&nbsp;&nbsp; <span class="user-name">@item.User.FirstName @item.User.LastName</span></span></td>
                                    <td><span class="@((Model.Search.Sort == SearchNationalLeaderboard.SortEnum.SquatAsc || Model.Search.Sort == SearchNationalLeaderboard.SortEnum.SquatDesc) ? "selected" : "")">@item.Squat.ToString("N0")</span></td>
                                    <td><span class="@((Model.Search.Sort == SearchNationalLeaderboard.SortEnum.BenchAsc || Model.Search.Sort == SearchNationalLeaderboard.SortEnum.BenchDesc) ? "selected" : "")">@item.Bench.ToString("N0")</span></td>
                                    <td><span class="@((Model.Search.Sort == SearchNationalLeaderboard.SortEnum.CleanAsc || Model.Search.Sort == SearchNationalLeaderboard.SortEnum.CleanDesc) ? "selected" : "")">@item.Clean.ToString("N0")</span></td>
                                    <td><span class="@((Model.Search.Sort == SearchNationalLeaderboard.SortEnum.TotalAsc || Model.Search.Sort == SearchNationalLeaderboard.SortEnum.TotalDesc) ? "selected" : "")">@item.Total.ToString("N0")</span></td>
                                </tr>
                            }
                        </table>
                        } else
                        {
                            <div class="clearfix"></div>
                            <div class="field-validation-error filter-error">We couldn’t find any results that matched your search criteria. Please modify your search.</div>
                        }
                        <div class="text-center">
                            <ul class="pagination">
                                @Html.PageLinkBootstrap(Model.Search.Page, Model.CountPage, i => @Url.Action("Index", new { Page = i, Sort = Model.Search.Sort, SportID = Model.Search.SportID, StateID = Model.Search.StateID, FieldPositionID = Model.Search.FieldPositionID, Gender = Model.Search.Gender, Age = Model.Search.Age, LevelID = Model.Search.LevelID, GradYear = Model.Search.GradYear }))
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>